{"version":3,"file":"js/93.7288b86f.js","mappings":"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","sources":["webpack://shopcart/./src/views/cart.vue","webpack://shopcart/./src/api/cart.js","webpack://shopcart/./src/views/cart.vue?aaee"],"sourcesContent":["<template>\r\n    <el-breadcrumb :separator-icon=\"ArrowRight\">\r\n        <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n        <el-breadcrumb-item>我的购物车</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n\r\n    <!-- 卡片视图 -->\r\n    <el-card class=\"box-card\">\r\n        <el-row :gutter=\"20\">\r\n            <el-col :span=\"12\">\r\n                <!-- 搜索输入框 -->\r\n                <el-input placeholder=\"搜素商品\" v-model=\"searchinput\" clearable @clear=\"loadTable()\">\r\n                    <template #append>\r\n                        <el-button @click=\"search()\" :icon=\"Search\" />\r\n                    </template>\r\n                </el-input>\r\n            </el-col>\r\n        </el-row>\r\n        <!-- max-height=\"500\" -->\r\n        <!-- current-change 事件来管理选中时触发的事件，它会传入 currentRow，oldCurrentRow -->\r\n        <el-table :data=\"tableData\" stripe style=\"width: 100%\" height=\"500\" highlight-current-row\r\n            @current-change=\"handleCurrentChange\" @selection-change=\"handleSelectionChange\">\r\n            <el-table-column type=\"selection\" width=\"55\" />\r\n            <el-table-column fixed=\"left\" type=\"index\"></el-table-column>\r\n            <el-table-column prop=\"name\" label=\"商品名称\" width=\"140\" />\r\n            <el-table-column prop=\"shopid\" label=\"店铺\" width=\"140\" />\r\n            <el-table-column prop=\"price\" label=\"单价/元\" />\r\n            <el-table-column prop=\"quantity\" label=\"数量\">\r\n                <!--数量选择框 -->\r\n                <template #default=\"scope\">\r\n                    <el-input-number size=\"small\" v-model=\"scope.row.quantity\" :min=\"1\" :max=\"100\"\r\n                        @change=\"handleChange(scope.row)\" />\r\n                </template>\r\n            </el-table-column> />\r\n\r\n            <el-table-column fixed=\"right\" label=\"操作\">\r\n                <template #default=\"scope\">\r\n                    <el-button type=\"primary\" size=\"small\" @click=\"handleRemove(scope.row)\">删除</el-button>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n    </el-card>\r\n    <div>\r\n        <!-- 底部区域 -->\r\n        <el-footer>\r\n            <span>总计：</span>\r\n            <el-text>{{ sumPrice }}</el-text>\r\n            <span>元</span>\r\n            <el-button type=\"primary\" @click=\"shopResult\">结算</el-button>\r\n        </el-footer>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { Search, ArrowRight } from '@element-plus/icons-vue'\r\nimport { reactive, ref, toRefs, computed  } from 'vue'\r\n//导航访问后台api\r\nimport { list, del } from '../api/cart'\r\n\r\nexport default {\r\n    name: 'goods',\r\n    setup() {\r\n        const num = ref(1)\r\n        const searchinput = ref('')\r\n\r\n        let data = reactive({\r\n            tableData: [],\r\n            sumPrice: 0,\r\n            selectedRows: []\r\n        })\r\n\r\n        //加载表格数据\r\n        let loadTable = async () => {\r\n            let r = await list()\r\n            data.tableData = r\r\n        }\r\n        loadTable()\r\n\r\n        //删除商品\r\n        let handleRemove = async (row) => {\r\n            console.log(row)\r\n\r\n            let r = await del(row)\r\n            if (r) { //如果删除成功\r\n                //刷新表格信息\r\n                loadTable()\r\n            }\r\n        }\r\n\r\n        let sumup = (rows) => {\r\n            let sum = 0;\r\n            if (rows) {\r\n                rows.forEach((row) => {\r\n                    console.log(row.quantity)\r\n                    sum += row.quantity * row.price\r\n                    console.log(data.sumPrice)\r\n                })\r\n            } else {\r\n                console.log('nothing')\r\n            }\r\n            return sum\r\n        }\r\n\r\n        //复选框事件\r\n        let handleSelectionChange = (rows) => {\r\n            data.sumPrice = 0\r\n            console.log('复选框')\r\n            console.log(rows)\r\n            data.selectedRows = rows\r\n            data.sumPrice = sumup(rows)\r\n        }\r\n\r\n\r\n        //增减数量触发函数\r\n        const handleChange = (row) => {\r\n            data.sumPrice = 0\r\n            console.log(`商品 ${row.name} 的数量为：${row.quantity}`)\r\n            data.sumPrice = sumup(data.selectedRows)\r\n        }\r\n\r\n        //搜索商品\r\n        const results = computed(() => {\r\n            return data.tableData.filter(item => item.name.includes(searchinput.value));\r\n        });\r\n        const search = () => {\r\n            let items = results.value;\r\n            items.forEach((item) => {\r\n                console.log(item.name)\r\n            });\r\n            data.tableData = items\r\n        };\r\n\r\n        let shopResult = () => {\r\n            console.log('结算')\r\n        }\r\n\r\n\r\n        return {\r\n            ...toRefs(data),\r\n            Search,\r\n            ArrowRight,\r\n            num,\r\n            handleRemove,\r\n            shopResult,\r\n            handleSelectionChange,\r\n            handleChange,\r\n            sumup,\r\n            searchinput,\r\n            results,\r\n            search,\r\n            loadTable\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped lang='scss'>\r\n.box-card {\r\n    width: 100%;\r\n\r\n    .el-table {\r\n        margin-top: 15px;\r\n    }\r\n}\r\n\r\n.el-footer {\r\n    height: 10vh;\r\n    background-color: rgb(161, 187, 182);\r\n    display: flex; //改变位置\r\n    justify-content: right; //水平居中\r\n    align-items: center; //垂直居中\r\n\r\n    span {\r\n        margin-right: 20px;\r\n    }\r\n\r\n    .el-text {\r\n        margin-right: 15px;\r\n    }\r\n}\r\n</style>\r\n\r\n","//定义购物车api函数\r\n\r\nimport {$get,$post} from '../utils/request.js'\r\nimport {$msg_s, $msg_e, $confirm} from '../utils/msg.js'\r\n\r\n//定义登陆方法\r\nexport let list = async ()=>{\r\n    let data = await $get('/cart')\r\n\r\n    console.log(data)\r\n    return data\r\n}\r\n\r\n//删除\r\nexport let del = async (params) =>{\r\n    await $confirm('是否确定删除\\t'+params.name)\r\n    //发请求\r\n    let {success} = await $post('/delete',params)\r\n    console.log(success)\r\n    if(success){\r\n        $msg_s('删除成功！')\r\n    }else{\r\n        $msg_e('失败！请重试')\r\n    }\r\n    // alert(message)\r\n    return success\r\n\r\n}","import { render } from \"./cart.vue?vue&type=template&id=bc6a1e82&scoped=true\"\nimport script from \"./cart.vue?vue&type=script&lang=js\"\nexport * from \"./cart.vue?vue&type=script&lang=js\"\n\nimport \"./cart.vue?vue&type=style&index=0&id=bc6a1e82&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-bc6a1e82\"]])\n\nexport default __exports__"],"names":["_createElementVNode","_createVNode","_component_el_breadcrumb","$setup","ArrowRight","_component_el_breadcrumb_item","to","path","_component_el_card","class","_component_el_row","gutter","_component_el_col","span","_component_el_input","placeholder","searchinput","$event","clearable","onClear","_cache","loadTable","append","_withCtx","_component_el_button","onClick","search","icon","Search","_component_el_table","data","_ctx","tableData","stripe","style","height","onCurrentChange","handleCurrentChange","onSelectionChange","handleSelectionChange","_component_el_table_column","type","width","fixed","prop","label","default","scope","_component_el_input_number","size","row","quantity","min","max","onChange","handleChange","handleRemove","_component_el_footer","_hoisted_1","_component_el_text","sumPrice","_hoisted_2","shopResult","list","async","$get","console","log","del","$confirm","params","name","success","$post","$msg_s","$msg_e","setup","num","ref","reactive","selectedRows","r","sumup","rows","sum","forEach","price","results","computed","filter","item","includes","value","items","toRefs","__exports__","render"],"sourceRoot":""}